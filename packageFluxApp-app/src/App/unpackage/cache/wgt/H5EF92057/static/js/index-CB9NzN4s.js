import{d as e,r as a,h as l,s,j as o,L as r,k as t,l as u,f as n,g as d,b as i,u as f,a as m,t as p,w as c,o as g,m as _,n as x,p as w,q as y,c as v,v as b,e as h,_ as k}from"./index-D4uuwCX8.js";import{s as R,g as V,a as q}from"./axios-CWSJqVFA.js";import"./__commonjsHelpers__-lGe4XDVY.js";var j;(j||(j={})).REGISTER="/v1/auth/password-register";const C={class:"form center"},E={class:"flex items-center formRef"},I={class:"ml-6px font-bold text-xl"},S=k(e({__name:"index",setup(e){const k=o(),S=V("images/logo/logo.png"),T=a(),U=a({isCountingDown:!1,countdownSeconds:60,loading:!1,form:{username:"",email:"",password:""},rules:{username:[{required:!0,message:"请输入用户账号",trigger:"blur"}],email:[{required:!0,message:"请输入登录的邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}),D=l({skyRegister:async()=>{T.value&&T.value.validate((async e=>{if(e){U.value.loading=!0;try{await(a=U.value.form,R.post(j.REGISTER,a)),U.value.loading=!1,s("注册成功🌻"),await k.push(r)}catch(l){let e=1;setInterval((()=>{e--,0===e&&(U.value.loading=!1)}),1e3)}}else t("校验失败，信息填写有误🌻");var a}))}});return u((()=>U.value.isCountingDown?`${U.value.countdownSeconds}秒后重试`:"发送验证码")),(e,a)=>{const l=m("el-image"),s=m("el-input"),o=m("el-form-item"),r=m("el-col"),t=m("el-row"),u=m("el-checkbox"),R=m("el-button"),V=m("el-form");return g(),n("div",C,[d("div",E,[i(l,{class:"rounded-full w-36px h-36px",src:f(S)},null,8,["src"]),d("div",I,p(f(q).logoTitle||"APP 热更新 管理平台"),1)]),a[6]||(a[6]=d("div",{class:"flex items-center space-x-3 text-gray-400 mt-16px mb-16px formRef"},[d("span",{class:"h-1px w-16 bg-gray-300 inline-block"}),d("span",{class:"text-center"},"邮箱密码注册"),d("span",{class:"h-1px w-16 bg-gray-300 inline-block"})],-1)),i(V,{ref_key:"formRef",ref:T,class:"w-300px formRef",model:f(U).form,rules:f(U).rules,"label-width":"auto"},{default:c((()=>[i(t,{gutter:24},{default:c((()=>[i(r,{span:24},{default:c((()=>[i(o,{label:"用户名",prop:"username",required:""},{default:c((()=>[i(s,{type:"text",modelValue:f(U).form.username,"onUpdate:modelValue":a[0]||(a[0]=e=>f(U).form.username=e),placeholder:"请输入用户名","suffix-icon":f(_)},null,8,["modelValue","suffix-icon"])])),_:1})])),_:1})])),_:1}),i(t,{gutter:24},{default:c((()=>[i(r,{span:24},{default:c((()=>[i(o,{label:"邮箱",prop:"email",required:""},{default:c((()=>[i(s,{type:"text",modelValue:f(U).form.email,"onUpdate:modelValue":a[1]||(a[1]=e=>f(U).form.email=e),placeholder:"请输入邮箱","suffix-icon":f(x)},null,8,["modelValue","suffix-icon"])])),_:1})])),_:1})])),_:1}),i(t,{gutter:24},{default:c((()=>[i(r,{span:24},{default:c((()=>[i(o,{label:"密码",prop:"password",required:""},{default:c((()=>[i(s,{type:"password",modelValue:f(U).form.password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(U).form.password=e),placeholder:"请输入密码","show-password":"","suffix-icon":f(y),onKeydown:w(f(D).skyRegister,["enter"])},null,8,["modelValue","suffix-icon","onKeydown"])])),_:1})])),_:1})])),_:1}),i(t,{gutter:24},{default:c((()=>[i(r,{span:15},{default:c((()=>[i(o,{label:"记住密码"},{default:c((()=>[i(u,{name:"type"})])),_:1})])),_:1}),i(r,{span:8},{default:c((()=>[i(o,null,{default:c((()=>[d("span",{style:{color:"#1d189d","font-weight":"bold"},onClick:a[3]||(a[3]=e=>f(k).push("/login"))},"前往登录")])),_:1})])),_:1})])),_:1}),i(t,{gutter:24},{default:c((()=>[i(r,{span:24},{default:c((()=>[i(o,null,{default:c((()=>[f(U).loading?b("",!0):(g(),v(R,{key:0,style:{width:"100%"},type:"primary",round:"",onClick:f(D).skyRegister},{default:c((()=>a[4]||(a[4]=[h(" 注册 ")]))),_:1},8,["onClick"])),f(U).loading?(g(),v(R,{key:1,style:{width:"100%"},type:"primary",round:"",loading:f(U).loading},{default:c((()=>a[5]||(a[5]=[h(" 拼命注册中... ")]))),_:1},8,["loading"])):b("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])}}}),[["__scopeId","data-v-75223fcd"]]);export{S as default};
