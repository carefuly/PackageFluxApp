import{d as e,r as a,x as l,h as s,s as o,j as t,H as r,k as n,l as d,f as u,g as i,b as p,u as f,a as c,t as m,w as g,o as w,n as _,p as x,q as y,c as v,v as b,e as h,_ as k}from"./index-D4uuwCX8.js";import{s as L,g as V,a as j}from"./axios-CWSJqVFA.js";import"./__commonjsHelpers__-lGe4XDVY.js";var q,C;(C=q||(q={})).LOGIN="/v1/auth/password-login",C.LOGOUT="/v1/auth/logout",C.USERINFO="/v1/auth/userinfo";const I={class:"form center"},O={class:"flex items-center formRef"},R={class:"ml-6px font-bold text-xl"},U=k(e({__name:"index",setup(e){const k=t(),C=V("images/logo/logo.png"),U=a(),G=l(),N=a({isCountingDown:!1,countdownSeconds:60,loading:!1,captcha:"",form:{email:"",password:""},rules:{email:[{required:!0,message:"请输入登录的邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}),S=s({skyLogin:async()=>{U.value&&U.value.validate((async e=>{if(e){N.value.loading=!0;try{const e=await(a=N.value.form,L.post(q.LOGIN,a));G.setToken(e.data.token),N.value.loading=!1,o(e.msg),await k.push(r)}catch(l){let e=1;setInterval((()=>{e--,0===e&&(N.value.loading=!1)}),1e3)}}else n("校验失败，信息填写有误🌻");var a}))}});return d((()=>N.value.isCountingDown?`${N.value.countdownSeconds}秒后重试`:"发送验证码")),(e,a)=>{const l=c("el-image"),s=c("el-input"),o=c("el-form-item"),t=c("el-col"),r=c("el-row"),n=c("el-checkbox"),d=c("el-button"),L=c("el-form");return w(),u("div",I,[i("div",O,[p(l,{class:"rounded-full w-36px h-36px",src:f(C)},null,8,["src"]),i("div",R,m(f(j).logoTitle||"APP 热更新 管理平台"),1)]),a[5]||(a[5]=i("div",{class:"flex items-center space-x-3 text-gray-400 mt-16px mb-16px formRef"},[i("span",{class:"h-1px w-16 bg-gray-300 inline-block"}),i("span",{class:"text-center"},"账号密码登录"),i("span",{class:"h-1px w-16 bg-gray-300 inline-block"})],-1)),p(L,{ref_key:"formRef",ref:U,class:"w-300px formRef",model:f(N).form,rules:f(N).rules,"label-width":"auto"},{default:g((()=>[p(r,{gutter:24},{default:g((()=>[p(t,{span:24},{default:g((()=>[p(o,{label:"邮箱",prop:"email",required:""},{default:g((()=>[p(s,{type:"text",modelValue:f(N).form.email,"onUpdate:modelValue":a[0]||(a[0]=e=>f(N).form.email=e),placeholder:"请输入邮箱","suffix-icon":f(_)},null,8,["modelValue","suffix-icon"])])),_:1})])),_:1})])),_:1}),p(r,{gutter:24},{default:g((()=>[p(t,{span:24},{default:g((()=>[p(o,{label:"密码",prop:"password",required:""},{default:g((()=>[p(s,{type:"password",modelValue:f(N).form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>f(N).form.password=e),placeholder:"请输入密码","show-password":"","suffix-icon":f(y),onKeydown:x(f(S).skyLogin,["enter"])},null,8,["modelValue","suffix-icon","onKeydown"])])),_:1})])),_:1})])),_:1}),p(r,{gutter:24},{default:g((()=>[p(t,{span:15},{default:g((()=>[p(o,{label:"记住密码"},{default:g((()=>[p(n,{name:"type"})])),_:1})])),_:1}),p(t,{span:8},{default:g((()=>[p(o,null,{default:g((()=>[i("span",{style:{color:"#1d189d","font-weight":"bold"},onClick:a[2]||(a[2]=e=>f(k).push("/register"))},"前往注册")])),_:1})])),_:1})])),_:1}),p(r,{gutter:24},{default:g((()=>[p(t,{span:24},{default:g((()=>[p(o,null,{default:g((()=>[f(N).loading?b("",!0):(w(),v(d,{key:0,style:{width:"100%"},class:"bg-[--el-color-primary]",type:"primary",round:"",onClick:f(S).skyLogin},{default:g((()=>a[3]||(a[3]=[h(" 登录 ")]))),_:1},8,["onClick"])),f(N).loading?(w(),v(d,{key:1,style:{width:"100%"},class:"bg-[--el-color-primary]",type:"primary",round:"",loading:f(N).loading},{default:g((()=>a[4]||(a[4]=[h(" 拼命登录中... ")]))),_:1},8,["loading"])):b("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])}}}),[["__scopeId","data-v-b1dd02a3"]]);export{U as default};
